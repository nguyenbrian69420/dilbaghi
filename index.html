<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncing Logos</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: url('circuit.png') no-repeat center center fixed;
            background-size: cover;
        }
        .bouncing-image {
            position: absolute;
            width: 200px;
            height: auto;
            filter: brightness(1) saturate(1);
        }
    </style>
</head>
<body>
    <script>
        const images = [];
        const velocities = [];
        const usedColors = new Set();

        // Generate a random hue value for tinting
        const getRandomHue = () => Math.floor(Math.random() * 360);

        const applyHueTint = (img) => {
            const hue = getRandomHue();
            img.style.filter = `hue-rotate(${hue}deg) brightness(1.2) saturate(1.5)`;
        };

        const createImage = (index) => {
            const img = document.createElement('img');
            img.src = 'dhruv.png';
            img.alt = `Bouncing Image ${index}`;
            img.className = 'bouncing-image';
            img.style.left = `${Math.random() * (window.innerWidth - 200)}px`;
            img.style.top = `${Math.random() * (window.innerHeight - 200)}px`;
            applyHueTint(img); // Apply initial hue tint
            document.body.appendChild(img);
            images.push(img);

            const dx = (Math.random() < 0.5 ? 4 : -4) || 4;
            const dy = (Math.random() < 0.5 ? 4 : -4) || 4;
            velocities.push({ dx, dy });
        };

        const updatePositions = () => {
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;

            images.forEach((img, i) => {
                let x = parseFloat(img.style.left);
                let y = parseFloat(img.style.top);

                const { dx, dy } = velocities[i];

                // Bounce off walls
                if (x + dx > windowWidth - 200 || x + dx < 0) {
                    velocities[i].dx = -dx;
                    applyHueTint(img); // Change tint on wall collision
                }
                if (y + dy > windowHeight - 200 || y + dy < 0) {
                    velocities[i].dy = -dy;
                    applyHueTint(img); // Change tint on wall collision
                }

                // Update position
                x += velocities[i].dx;
                y += velocities[i].dy;

                // Check for collisions with other images
                images.forEach((otherImg, j) => {
                    if (i !== j) {
                        const otherX = parseFloat(otherImg.style.left);
                        const otherY = parseFloat(otherImg.style.top);

                        const dist = Math.sqrt(
                            Math.pow(x - otherX, 2) + Math.pow(y - otherY, 2)
                        );

                        if (dist < 200) {
                            const angle = Math.atan2(y - otherY, x - otherX);

                            // Update velocities to move apart
                            velocities[i].dx = Math.cos(angle) * 4;
                            velocities[i].dy = Math.sin(angle) * 4;
                            velocities[j].dx = -Math.cos(angle) * 4;
                            velocities[j].dy = -Math.sin(angle) * 4;

                            // Prevent overlapping by adjusting positions
                            const overlap = 200 - dist;
                            const adjustX = Math.cos(angle) * overlap / 2;
                            const adjustY = Math.sin(angle) * overlap / 2;

                            x += adjustX;
                            y += adjustY;
                            img.style.left = `${x}px`;
                            img.style.top = `${y}px`;

                            const otherNewX = otherX - adjustX;
                            const otherNewY = otherY - adjustY;
                            otherImg.style.left = `${otherNewX}px`;
                            otherImg.style.top = `${otherNewY}px`;

                            applyHueTint(img); // Change tint on collision
                            applyHueTint(otherImg); // Change tint on collision
                        }
                    }
                });

                // Apply updated positions
                img.style.left = `${x}px`;
                img.style.top = `${y}px`;
            });

            requestAnimationFrame(updatePositions);
        };

        // Prompt user for number of images
        let numImages;
        do {
            numImages = prompt('¿Cuántos? (Enter a number between 1 and 10)', '5');
            numImages = parseInt(numImages, 10);
        } while (isNaN(numImages) || numImages <= 0 || numImages > 10);

        for (let i = 0; i < numImages; i++) {
            createImage(i);
        }

        // Start the animation
        updatePositions();
    </script>
</body>
</html>
